# Story 6.2 - Voir les fiches supprimÃ©es (barrÃ©es)

## Epic
Epic 6 : Gestion des fiches (soft delete)

## User Story
**En tant qu'** utilisateur  
**Je veux** voir les fiches supprimÃ©es affichÃ©es barrÃ©es  
**Afin de** savoir ce qui a Ã©tÃ© retirÃ© du catalogue sans perdre l'information

## Contexte
Les fiches supprimÃ©es restent visibles pour la transparence. On peut voir qui a supprimÃ© et quand. L'affichage barrÃ© indique clairement que l'objet n'est plus "en jeu".

## CritÃ¨res d'Acceptation

- [ ] Les fiches supprimÃ©es sont affichÃ©es en fin de galerie
- [ ] Elles sont visuellement distinctes : grisÃ©es et barrÃ©es
- [ ] On peut cliquer dessus pour voir le dÃ©tail
- [ ] Sur le dÃ©tail, on voit qui a supprimÃ© et quand
- [ ] Un compteur indique le nombre de fiches supprimÃ©es
- [ ] Option de masquer complÃ¨tement les fiches supprimÃ©es (toggle)

## Ã‰lÃ©ments Techniques

### Informations de suppression dans le dÃ©tail
```jsx
function ItemDetail({ item }) {
  return (
    <div className={`item-detail ${item.deleted_at ? 'deleted' : ''}`}>
      {item.deleted_at && (
        <div className="deleted-banner">
          ğŸ—‘ï¸ SupprimÃ©e par {item.deleted_by_name} 
          le {formatDate(item.deleted_at)}
          <button onClick={handleRestore}>Restaurer</button>
        </div>
      )}
      {/* ... reste du contenu */}
    </div>
  );
}
```

### Toggle pour masquer les supprimÃ©es
```jsx
function GalleryHeader({ showDeleted, onToggleDeleted, deletedCount }) {
  return (
    <div className="gallery-header">
      <label className="toggle">
        <input 
          type="checkbox" 
          checked={showDeleted}
          onChange={onToggleDeleted}
        />
        Afficher les supprimÃ©es ({deletedCount})
      </label>
    </div>
  );
}
```

### SQL avec infos du supprimeur
```sql
SELECT 
  i.*,
  u.name as deleted_by_name
FROM items i
LEFT JOIN users u ON i.deleted_by = u.id
ORDER BY 
  CASE WHEN i.deleted_at IS NULL THEN 0 ELSE 1 END,
  i.number;
```

### Styles de la banniÃ¨re
```css
.deleted-banner {
  background: #f8d7da;
  border: 1px solid #f5c6cb;
  color: #721c24;
  padding: 12px;
  border-radius: 4px;
  margin-bottom: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.deleted-banner button {
  background: #28a745;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
}
```

## Maquette SimplifiÃ©e

```
Galerie avec toggle :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜‘ï¸ Afficher supprimÃ©es (3) â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ğŸ“·    â”‚ â”‚ ğŸ“·    â”‚ activesâ”‚
â”‚  â”‚  #1   â”‚ â”‚  #3   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚
â”‚  â”€â”€ SupprimÃ©es â”€â”€           â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ğŸ“· â•²  â”‚ â”‚ ğŸ“· â•²  â”‚ barrÃ©esâ”‚
â”‚  â”‚ #2 â•±  â”‚ â”‚ #4 â•±  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DÃ©tail d'une fiche supprimÃ©e :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ—‘ï¸ SupprimÃ©e par Marie  â”‚ â”‚
â”‚ â”‚    le 15 janvier        â”‚ â”‚
â”‚ â”‚              [Restaurer]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚      ğŸ“· â•²         â”‚    â”‚
â”‚    â”‚        â•±          â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚
â”‚    #2 - Lampe ancienne      â”‚
â”‚    (contenu barrÃ©)          â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DÃ©pendances
- 6.1 : Le mÃ©canisme de soft delete

## Stories LiÃ©es
- 6.3 : Restauration d'une fiche
