# Story 5.1 - Voir toutes les fiches en mode galerie

## Epic
Epic 5 : Consultation et vues filtrÃ©es

## User Story
**En tant qu'** utilisateur  
**Je veux** voir toutes les fiches en mode galerie  
**Afin d'** avoir une vue d'ensemble de tous les objets du catalogue

## Contexte
C'est l'Ã©cran principal de l'application. Il affiche une grille de miniatures cliquables. Chaque miniature montre la photo principale, le numÃ©ro, et Ã©ventuellement des indicateurs (ma prÃ©fÃ©rence, conflits...).

## CritÃ¨res d'Acceptation

- [ ] La galerie affiche toutes les fiches en grille responsive
- [ ] Chaque miniature montre : photo principale, numÃ©ro (#1, #2...)
- [ ] Les fiches sont triÃ©es par numÃ©ro croissant par dÃ©faut
- [ ] Cliquer sur une miniature ouvre la page de dÃ©tail
- [ ] Les fiches supprimÃ©es (soft delete) sont affichÃ©es barrÃ©es/grisÃ©es
- [ ] Un bouton "+" permet d'ajouter une nouvelle photo
- [ ] La galerie se charge rapidement (pagination ou lazy loading si >50 fiches)

## Ã‰lÃ©ments Techniques

### API Endpoint
```
GET /api/items
Headers: { X-User-Id: 123 }
â†’ Retourne [{
    id, number, title,
    photo: "data:image/...", // Miniature compressÃ©e
    deleted_at,
    myPreference
  }]
```

### Miniatures optimisÃ©es
Stocker une version miniature (thumbnail) en plus de la photo originale pour un chargement rapide de la galerie.

```sql
-- Ajouter un champ thumbnail Ã  la table photos
ALTER TABLE photos ADD COLUMN thumbnail TEXT;
```

### Composant Galerie
```jsx
function Gallery({ items, onItemClick, onAddClick }) {
  return (
    <div className="gallery">
      <div className="gallery-grid">
        {items.map(item => (
          <ItemCard 
            key={item.id}
            item={item}
            onClick={() => onItemClick(item.id)}
          />
        ))}
      </div>
      <button className="add-button" onClick={onAddClick}>
        â•
      </button>
    </div>
  );
}
```

### Style responsive
```css
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
  padding: 12px;
}

.item-card {
  aspect-ratio: 1;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
  cursor: pointer;
}

.item-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.item-card.deleted {
  opacity: 0.5;
}

.item-card.deleted::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 2px;
  background: red;
  transform: rotate(-45deg);
}

.item-number {
  position: absolute;
  bottom: 4px;
  left: 4px;
  background: rgba(0,0,0,0.7);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: bold;
}
```

## Maquette SimplifiÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¦ HÃ©ritage    [ğŸ‘¤ Marie â–¼] â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“·  â¤ï¸â”‚ â”‚ ğŸ“·  ğŸ¤”â”‚ â”‚ ğŸ“·  â”‚â”‚
â”‚  â”‚  #1   â”‚ â”‚  #2   â”‚ â”‚ #3  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“· â•²  â”‚ â”‚ ğŸ“·    â”‚ â”‚ ğŸ“·  â”‚â”‚
â”‚  â”‚  #4â•±  â”‚ â”‚  #5   â”‚ â”‚ #6  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜â”‚
â”‚   supprimÃ©                  â”‚
â”‚                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚              â”‚  â• +   â”‚    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚
â”‚  [Tous] [Ã€ traiter] [â¤ï¸]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DÃ©pendances
- Epic 1 : Identification (header avec utilisateur)
- Epic 2 : Des fiches doivent exister

## Stories LiÃ©es
- 5.2 : DÃ©tail d'une fiche (au clic)
- 5.4, 5.5, 5.6, 5.7 : Filtres de la galerie
- 2.1, 2.2 : Ajout de photos (bouton +)
