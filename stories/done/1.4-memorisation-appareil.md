# Story 1.4 - MÃ©morisation sur l'appareil

## Epic
Epic 1 : Identification simple

## User Story
**En tant qu'** utilisateur  
**Je veux** que l'app se souvienne de moi sur cet appareil  
**Afin de** ne pas avoir Ã  m'identifier Ã  chaque ouverture

## Contexte
Chaque appareil (iPad de mamie, iPhone de Pierre, etc.) correspond gÃ©nÃ©ralement Ã  une seule personne. Une fois identifiÃ©, l'utilisateur ne devrait plus avoir Ã  choisir son prÃ©nom.

## CritÃ¨res d'Acceptation

- [ ] AprÃ¨s identification complÃ¨te (prÃ©nom + rÃ´le), sauvegarder l'ID utilisateur localement
- [ ] Au lancement de l'app, vÃ©rifier si un utilisateur est mÃ©morisÃ©
- [ ] Si oui, charger ses informations et aller directement Ã  la galerie
- [ ] Si l'utilisateur mÃ©morisÃ© n'existe plus en base, afficher l'Ã©cran d'identification
- [ ] Un bouton "Changer d'utilisateur" permet de revenir Ã  l'Ã©cran d'identification
- [ ] Ce bouton efface la mÃ©morisation locale

## Ã‰lÃ©ments Techniques

### Stockage Local
```javascript
// Sauvegarder
localStorage.setItem('heritage_user_id', userId);

// RÃ©cupÃ©rer
const savedUserId = localStorage.getItem('heritage_user_id');

// Effacer
localStorage.removeItem('heritage_user_id');
```

### VÃ©rification au dÃ©marrage
```javascript
async function checkSavedUser() {
  const savedUserId = localStorage.getItem('heritage_user_id');
  if (!savedUserId) return null;
  
  try {
    const response = await fetch(`/api/users/${savedUserId}`);
    if (response.ok) {
      return await response.json();
    }
  } catch (e) {
    // Utilisateur supprimÃ© ou erreur rÃ©seau
  }
  
  localStorage.removeItem('heritage_user_id');
  return null;
}
```

### API Endpoint
```
GET /api/users/:id
â†’ Retourne { id, name, role }
â†’ Erreur 404 si l'utilisateur n'existe pas
```

## Maquette SimplifiÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¦ HÃ©ritage    [ğŸ‘¤ Marie â–¼] â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                             â”‚
â”‚    (Galerie des objets)     â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Menu dÃ©roulant :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Marie (enfant)              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Changer d'utilisateur       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DÃ©pendances
- 1.1, 1.2, 1.3 : Le flux d'identification complet

## Stories LiÃ©es
- 5.1 : La galerie principale (destination aprÃ¨s identification)
