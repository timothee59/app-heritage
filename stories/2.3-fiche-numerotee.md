# Story 2.3 - CrÃ©ation automatique de fiche numÃ©rotÃ©e

## Epic
Epic 2 : CrÃ©ation du catalogue photo

## User Story
**En tant qu'** utilisateur  
**Je veux** qu'une fiche soit crÃ©Ã©e automatiquement avec un numÃ©ro  
**Afin de** pouvoir rÃ©fÃ©rencer facilement les objets ("tu as vu le #47 ?")

## Contexte
Pour simplifier les discussions en famille, chaque objet a un numÃ©ro unique. Ce numÃ©ro est visible partout et sert de rÃ©fÃ©rence commune. Pas de titre obligatoire, le numÃ©ro suffit pour identifier un objet.

## CritÃ¨res d'Acceptation

- [ ] Chaque nouvelle fiche reÃ§oit automatiquement le prochain numÃ©ro disponible
- [ ] Le numÃ©ro commence Ã  1 et s'incrÃ©mente
- [ ] Le numÃ©ro est affichÃ© en Ã©vidence sur les miniatures ("#1", "#2"...)
- [ ] Le numÃ©ro est unique et ne change jamais (mÃªme si la fiche est supprimÃ©e)
- [ ] Le numÃ©ro est affichÃ© en grand sur la page de dÃ©tail
- [ ] Les fiches sont triÃ©es par numÃ©ro par dÃ©faut

## Ã‰lÃ©ments Techniques

### GÃ©nÃ©ration du numÃ©ro
```sql
-- MÃ©thode sÃ»re pour Ã©viter les doublons en concurrent
INSERT INTO items (number, created_by)
SELECT COALESCE(MAX(number), 0) + 1, $1 FROM items
RETURNING id, number;

-- Ou avec une sÃ©quence dÃ©diÃ©e
CREATE SEQUENCE item_number_seq START 1;

INSERT INTO items (number, created_by)
VALUES (nextval('item_number_seq'), $1)
RETURNING id, number;
```

### Affichage
```jsx
// Miniature dans la galerie
<div className="item-card">
  <img src={photo} />
  <span className="item-number">#{number}</span>
</div>

// Page de dÃ©tail
<h1 className="item-title">
  #{number}
  {title && ` - ${title}`}
</h1>
```

### Tri par dÃ©faut
```sql
SELECT * FROM items 
WHERE deleted_at IS NULL
ORDER BY number ASC;
```

## Maquette SimplifiÃ©e

```
Galerie :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ğŸ“·    â”‚ â”‚ ğŸ“·    â”‚        â”‚
â”‚  â”‚  #1   â”‚ â”‚  #2   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DÃ©tail :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚       #47                   â”‚
â”‚    Buffet en chÃªne          â”‚
â”‚                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                   â”‚    â”‚
â”‚    â”‚      ğŸ“·           â”‚    â”‚
â”‚    â”‚                   â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DÃ©pendances
- 2.1 ou 2.2 : La crÃ©ation de fiche doit exister

## Stories LiÃ©es
- 5.1 : Affichage dans la galerie
- 5.2 : Affichage dans le dÃ©tail
