# Story 4.3 - Marquer "Pas intÃ©ressÃ©"

## Epic
Epic 4 : Expression des prÃ©fÃ©rences

## User Story
**En tant qu'** utilisateur  
**Je veux** marquer une fiche comme "Pas intÃ©ressÃ©"  
**Afin d'** indiquer que je ne veux pas cet objet et faciliter le dÃ©compte

## Contexte
Marquer explicitement "pas intÃ©ressÃ©" permet de savoir que la personne a VU l'objet et fait un choix. C'est diffÃ©rent de "n'a pas encore vu". Cela aide Ã  identifier les objets que tout le monde a traitÃ©s.

## CritÃ¨res d'Acceptation

- [ ] Le bouton "Pas intÃ©ressÃ©" est le troisiÃ¨me des trois choix
- [ ] Il est visuellement distinct (ğŸ‘‹ ou couleur grise)
- [ ] Cliquer sur ce bouton enregistre la prÃ©fÃ©rence "no"
- [ ] Le bouton reste actif/sÃ©lectionnÃ© aprÃ¨s le clic
- [ ] Cette action compte comme "fiche traitÃ©e" pour cet utilisateur

## Ã‰lÃ©ments Techniques

### MÃªme endpoint que 4.1 et 4.2
```
POST /api/items/:itemId/preferences
Body: { level: "no" }
Headers: { X-User-Id: 123 }
```

### Impact sur les vues filtrÃ©es
```sql
-- Fiches que l'utilisateur n'a PAS traitÃ©es (pas de prÃ©fÃ©rence)
SELECT i.* FROM items i
LEFT JOIN preferences p ON i.id = p.item_id AND p.user_id = $1
WHERE p.id IS NULL AND i.deleted_at IS NULL;

-- Fiches oÃ¹ personne n'est intÃ©ressÃ© (tous ont dit "no")
SELECT i.* FROM items i
WHERE i.deleted_at IS NULL
AND NOT EXISTS (
  SELECT 1 FROM preferences p 
  WHERE p.item_id = i.id AND p.level IN ('love', 'maybe')
)
AND (
  SELECT COUNT(*) FROM preferences p WHERE p.item_id = i.id
) > 0;
```

## Maquette SimplifiÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¤ï¸   â”‚ â”‚  ğŸ¤”   â”‚ â”‚  ğŸ‘‹   â”‚
â”‚ Je le â”‚ â”‚  Si   â”‚ â”‚ Pas   â”‚
â”‚ veux! â”‚ â”‚person-â”‚ â”‚intÃ©-  â”‚
â”‚       â”‚ â”‚  ne   â”‚ â”‚ressÃ©  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
                     [ACTIF]
```

## DÃ©pendances
- 4.1 : Le composant de prÃ©fÃ©rences doit exister

## Stories LiÃ©es
- 5.6 : Vue "Mes fiches Ã  traiter" (exclut celles avec "no")
